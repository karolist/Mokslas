<HTML>
<HEAD>
<TITLE>Topic 49</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#CC00CC" VLINK="#CC00CC" ALINK="#CC00CC">
<SCRIPT language="JavaScript">
<!--
if (document.location==parent.document.location)
document.write("<CENTER><H3>This page is part of the Optimizing for Pentium(R) II and Pentium Pro Processors tutorial. To start the tutorial, please open the <a href=\"start.htm\">START.HTM</a> page in the same directory.</H3></CENTER>")
//-->
</SCRIPT>
<a name="top"></a>
<P><font size="+1"><b>П</b></font>рограммы, работающие с графикой, а также многие другие, часто пишут  в память и требуют высокой скорости выполнения операций записи.  Такие программы  должны использовать <A HREF="javascript:parent.showglos('writecombwrpol')">режим записи с буферизацией</a>.<P>При работе с областью памяти в этом режиме все данные записываются не в кэш, а в <A HREF="javascript:parent.showglos('writebuf')">буфер записи</a>.<P><font size="+1"><b>В</b></font> данном режиме число обращений к основной памяти может  быть уменьшено  за счет группировки операций записи с тем, чтобы как можно  больше писать в одну 32-байтную выровненную область памяти, прежде чем перейти к другой.<P><font size="+1"><b>В</b></font>ыберите пример кода с командами MMX™ и нажмите на кнопку   <B>"Показать"</B>,  чтобы посмотреть, как работает режим записи с буферизацией. В приведенном  примере регистр <FONT COLOR="#0000cc"><code>EAX</code></FONT> содержит адрес,  кратный  32 байтам.

<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;

<a name="o"></a>
<br>
<p>В коде, <B>оптимизированном для записи с буферизацией</B>, команды  записи в одну и ту же 32-байтную выровненную область памяти помещены в  одну группу, так что данные записываются только в буфер записи.  <BR>Пятая команда производит запись в другую 32-байтную выровненную область,  поэтому перед ее выполнением процессор должен поместить содержимое измененных  ячеек буфера записи в память.  

<BR>Данный код использует преимущества режима записи с буферизацией. При  его выполнении для записи четырех 64-разрядных слов в память понадобилась  одна пересылка по шине.
<p>
<a href="#top" target="_self">К началу страницы</a>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

<a name="no"></a>
<br>
<p>Каждые две соседние команды <B>кода до оптимизации</B> пишут в различные  32-байтные выровненные области памяти. Таким образом, процессор вынужден  пересылать измененные ячейки буфера записи в память после выполнения каждой  из команд.<BR>Данный код не использует преимущества режима записи с буферизацией.  При его выполнении для записи четырех 64-разрядных слов в память понадобилось  четыре пересылки по шине.
<p>
<a href="#top" target="_self">К началу страницы</a>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

</BODY>
</HTML>

